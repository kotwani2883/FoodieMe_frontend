{"version":3,"sources":["components/Register.jsx","components/Login.jsx","App.js","index.js"],"names":["Register","setShowRegister","useState","success","setSuccess","error","setError","usernameRef","useRef","emailRef","passwordRef","handleSubmit","e","a","preventDefault","newUser","username","current","value","email","password","axios","post","className","Room","onSubmit","autoFocus","placeholder","ref","type","min","Cancel","onClick","Login","setShowLogin","setCurrentUsername","myStorage","user","res","data","setItem","App","window","localStorage","getItem","currentUsername","pins","setPins","currentPlaceId","setCurrentPlaceId","newPlace","setNewPlace","title","setTitle","desc","setDesc","rating","showRegister","showLogin","width","height","latitude","longitude","zoom","viewport","setViewport","useEffect","get","console","log","getPins","newPin","lat","long","mapboxApiAccessToken","process","onViewportChange","nextViewport","onDblClick","lngLat","transitionDuration","map","p","offsetLeft","offsetTop","style","fontSize","color","cursor","id","_id","closeButton","closeOnClick","anchor","onClose","Array","fill","Star","format","createdAt","onChange","target","removeItem","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.54bb5b2f.chunk.js","sourcesContent":["import { Cancel, Room } from \"@material-ui/icons\";\r\nimport axios from \"axios\";\r\nimport { useRef, useState } from \"react\";\r\nimport \"./register.css\";\r\n\r\nexport default function Register({ setShowRegister }) {\r\n  const [success, setSuccess] = useState(false);\r\n  const [error, setError] = useState(false);\r\n  const usernameRef = useRef();\r\n  const emailRef = useRef();\r\n  const passwordRef = useRef();\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const newUser = {\r\n      username: usernameRef.current.value,\r\n      email: emailRef.current.value,\r\n      password: passwordRef.current.value,\r\n    };\r\n\r\n    try {\r\n      await axios.post(\"https://foodiemebackend.herokuapp.com/api/users/register\", newUser);\r\n      setError(false);\r\n      setSuccess(true);\r\n    } catch (err) {\r\n      setError(true);\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"registerContainer\">\r\n      <div className=\"logo\">\r\n        <Room className=\"logoIcon\" />\r\n        <span>Mark Your Pin</span>\r\n      </div>\r\n      <form onSubmit={handleSubmit}>\r\n        <input autoFocus placeholder=\"username\" ref={usernameRef} />\r\n        <input type=\"email\" placeholder=\"email\" ref={emailRef} />\r\n        <input\r\n          type=\"password\"\r\n          min=\"6\"\r\n          placeholder=\"password\"\r\n          ref={passwordRef}\r\n        />\r\n        <button className=\"registerBtn\" type=\"submit\">\r\n          Register\r\n        </button>\r\n        {success && (\r\n          <span className=\"success\">Successfull. You can login now!</span>\r\n        )}\r\n        {error && <span className=\"failure\">Something went wrong!</span>}\r\n      </form>\r\n      <Cancel\r\n        className=\"registerCancel\"\r\n        onClick={() => setShowRegister(false)}\r\n      />\r\n    </div>\r\n  );\r\n}","import { Cancel, Room } from \"@material-ui/icons\";\r\nimport axios from \"axios\";\r\nimport { useRef, useState } from \"react\";\r\nimport \"./login.css\";\r\n\r\nexport default function Login({ setShowLogin, setCurrentUsername,myStorage }) {\r\n    const [error, setError] = useState(false);\r\n    const usernameRef = useRef();\r\n    const passwordRef = useRef();\r\n  \r\n    const handleSubmit = async (e) => {\r\n      e.preventDefault();\r\n      const user = {\r\n        username: usernameRef.current.value,\r\n        password: passwordRef.current.value,\r\n      };\r\n      try {\r\n        const res = await axios.post(\"/users/login\", user);\r\n        setCurrentUsername(res.data.username);\r\n        myStorage.setItem('user', res.data.username);\r\n        setShowLogin(false)\r\n      } catch (err) {\r\n        setError(true);\r\n      }\r\n    };\r\n  \r\n    return (\r\n      <div className=\"loginContainer\">\r\n        <div className=\"logo\">\r\n          <Room className=\"logoIcon\" />\r\n          <span>LamaPin</span>\r\n        </div>\r\n        <form onSubmit={handleSubmit}>\r\n          <input autoFocus placeholder=\"username\" ref={usernameRef} />\r\n          <input\r\n            type=\"password\"\r\n            min=\"6\"\r\n            placeholder=\"password\"\r\n            ref={passwordRef}\r\n          />\r\n          <button className=\"loginBtn\" type=\"submit\">\r\n            Login\r\n          </button>\r\n          {error && <span className=\"failure\">Something went wrong!</span>}\r\n        </form>\r\n        <Cancel className=\"loginCancel\" onClick={() => setShowLogin(false)} />\r\n      </div>\r\n    );\r\n  }","import { useEffect, useState } from 'react';\nimport './App.css';\nimport ReactMapGL, { Marker, Popup } from \"react-map-gl\";\nimport { Room, Star, StarBorder } from \"@material-ui/icons\";\nimport axios from \"axios\";\nimport {format} from \"timeago.js\"\nimport Register from \"./components/Register\";\nimport Login from './components/Login';\n\nfunction App() {\n  const myStorage = window.localStorage;\n  const [currentUsername, setCurrentUsername] = useState(myStorage.getItem(\"user\"));\n  const [pins,setPins]=useState([]);\n  const [currentPlaceId,setCurrentPlaceId]=useState(null);\n  const [newPlace,setNewPlace]=useState(null);\n  const [title, setTitle] = useState(null);\n  const [desc, setDesc] = useState(null);\n  const [rating, setRating] = useState(0);\n  const [showRegister, setShowRegister] = useState(false);\n  const [showLogin, setShowLogin] = useState(false);\n  const [viewport, setViewport] = useState({\n    width: '100vw',\n    height: '100vh',\n    latitude: 20.5937,\n    longitude:78.9629,\n    zoom: 4\n  });\n\n  useEffect(()=>{\nconst getPins=async ()=>{\n  try{\n const res=await axios.get(\"https://foodiemebackend.herokuapp.com/api/pins\");\n console.log(res.data);\n setPins(res.data);\n\n  }catch(err){\n    console.log(err)\n  }\n}\ngetPins()\n  },[])\n\n  const handleMarkerClick = (id,lat,long) =>{\n    setCurrentPlaceId(id);\n    setViewport({...viewport,lat,long})\n\n  }\n\n  const handleAddClick=(e)=>{\n    const [long,lat]=e.lngLat;\n    setNewPlace({\n      lat,\n      long\n    })\n  }\n  const handleLogout = () => {\n    setCurrentUsername(null);\n    myStorage.removeItem(\"user\");\n  };\n\n  const handleSubmit=async (e)=>{\n    e.preventDefault();\n    const newPin={\n      username:currentUsername,\n      title,\n      desc,\n      rating,\n      lat:newPlace.lat,\n      long:newPlace.long\n    }\n    try{\n      const res=await axios.post(\"https://foodiemebackend.herokuapp.com/api/pins\",newPin);\n      console.log(res);\n      setPins([...pins,res.data]);\n      setNewPlace(null);\n    }catch(err){\n      console.log(err);\n    }\n  }\n  return (\n   <div className=\"App\"> \n    <ReactMapGL\n      {...viewport}\n      mapboxApiAccessToken={process.env.REACT_APP_MAPBOX}\n      onViewportChange={nextViewport => setViewport(nextViewport)}\n      onDblClick={handleAddClick}\n      transitionDuration=\"200\"\n    >\n      {pins.map((p)=>(\n        <>\n        <Marker \n        latitude={p.lat}\n         longitude={p.long}\n          offsetLeft={-3.5 * viewport.zoom} \n          offsetTop={viewport.zoom *8}>\n        <Room style={{fontSize:viewport.zoom *8,color:p.username===currentUsername?'tomato':'blue',cursor:\"pointer\"}}\n        onClick={()=>handleMarkerClick(p._id,p.lat,p.long)}\n        />\n        </Marker>\n        {p._id== currentPlaceId && (\n        <Popup\n            latitude={p.lat}\n            longitude={p.long}\n            closeButton={true}\n            closeOnClick={false}\n            \n            anchor=\"left\" \n            onClose={()=>setCurrentPlaceId(null)}\n            >\n            <div className=\"card\">\n              <label>Place</label>\n              <h4 className=\"place\">{p.title}</h4>\n              <label>Review</label>\n              <p>{p.desc}</p>\n              <label>Rating</label>\n              <div className=\"stars\">\n              {Array(p.rating).fill(<Star className=\"star\" />)}\n             \n              </div>\n              <label>Information</label>\n              <span className=\"username\">Created By <b>{p.username}</b></span>\n              <span className=\"date\">{format(p.createdAt)}</span>\n            </div>\n          </Popup>\n        )}\n          </>\n      ))}\n\n\n{newPlace && (\n <Popup\n            latitude={newPlace.lat}\n            longitude={newPlace.long}\n            closeButton={true}\n            closeOnClick={false}\n            \n            anchor=\"left\" \n            onClose={()=>setNewPlace(null)}\n            >\n             <div>\n               <form onSubmit={handleSubmit}>\n                 <label>Title</label>\n                 <input\n                  placeholder=\"Enter the Title\"\n                  onChange={(e)=>setTitle(e.target.value)}/>\n                 <label>Review</label>\n                 <textarea\n                  placeholder=\"How is this place\"\n                  onChange={(e)=>setDesc(e.target.value)}\n                  />\n                 <label>Rating</label>\n                 <select>\n                   <option value=\"1\">1</option>\n                   <option value=\"2\">2</option>\n                   <option value=\"3\">3</option>\n                   <option value=\"4\">4</option>\n                   <option value=\"5\">5</option>\n                 </select>\n                <button className=\"submitButton\" type=\"submit\">Add Pin</button>\n\n\n               \n               </form>\n             </div>\n\n </Popup>\n\n)}\n {currentUsername ? (\n          <button className=\"button logout\" onClick={handleLogout}>\n            Log out\n          </button>\n        ) : (\n          <div className=\"buttons\">\n            <button className=\"button login\" onClick={() => setShowLogin(true)}>\n              Log in\n            </button>\n            <button\n              className=\"button register\"\n              onClick={() => setShowRegister(true)}\n            >\n              Register\n            </button>\n          </div>\n        )}\n         {showRegister && <Register setShowRegister={setShowRegister} />}\n        {showLogin && (\n          <Login\n            setShowLogin={setShowLogin}\n            setCurrentUsername={setCurrentUsername}\n            myStorage={myStorage}\n          />\n        )}\n      </ReactMapGL>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n\n"],"sourceRoot":""}