(this.webpackJsonpfoodiewe=this.webpackJsonpfoodiewe||[]).push([[0],{114:function(e,t,n){},118:function(e,t,n){},119:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),s=n(60),r=n.n(s),o=(n(70),n(18)),l=n(26),i=n(14),u=n.n(i),j=n(16),b=n(6),d=(n(72),n(25)),O=n(131),p=n(133),h=n(17),m=n.n(h),f=n(63),x=n(132),g=(n(114),n(3));function v(e){var t=e.setShowRegister,n=Object(c.useState)(!1),a=Object(b.a)(n,2),s=a[0],r=a[1],o=Object(c.useState)(!1),l=Object(b.a)(o,2),i=l[0],d=l[1],p=Object(c.useRef)(),h=Object(c.useRef)(),f=Object(c.useRef)(),v=function(){var e=Object(j.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={username:p.current.value,email:h.current.value,password:f.current.value},e.prev=2,e.next=5,m.a.post("https://foodiemebackend.herokuapp.com/api/users/register",n);case 5:d(!1),r(!0),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),d(!0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)("div",{className:"registerContainer",children:[Object(g.jsxs)("div",{className:"logo",children:[Object(g.jsx)(O.a,{className:"logoIcon"}),Object(g.jsx)("span",{children:"Mark Your Pin"})]}),Object(g.jsxs)("form",{onSubmit:v,children:[Object(g.jsx)("input",{autoFocus:!0,placeholder:"username",ref:p}),Object(g.jsx)("input",{type:"email",placeholder:"email",ref:h}),Object(g.jsx)("input",{type:"password",min:"6",placeholder:"password",ref:f}),Object(g.jsx)("button",{className:"registerBtn",type:"submit",children:"Register"}),s&&Object(g.jsx)("span",{className:"success",children:"Successfull. You can login now!"}),i&&Object(g.jsx)("span",{className:"failure",children:"Something went wrong!"})]}),Object(g.jsx)(x.a,{className:"registerCancel",onClick:function(){return t(!1)}})]})}n(118);function w(e){var t=e.setShowLogin,n=e.setCurrentUsername,a=e.myStorage,s=Object(c.useState)(!1),r=Object(b.a)(s,2),o=r[0],l=r[1],i=Object(c.useRef)(),d=Object(c.useRef)(),p=function(){var e=Object(j.a)(u.a.mark((function e(c){var s,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),s={username:i.current.value,password:d.current.value},e.prev=2,e.next=5,m.a.post("/users/login",s);case 5:r=e.sent,n(r.data.username),a.setItem("user",r.data.username),t(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),l(!0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)("div",{className:"loginContainer",children:[Object(g.jsxs)("div",{className:"logo",children:[Object(g.jsx)(O.a,{className:"logoIcon"}),Object(g.jsx)("span",{children:"LamaPin"})]}),Object(g.jsxs)("form",{onSubmit:p,children:[Object(g.jsx)("input",{autoFocus:!0,placeholder:"username",ref:i}),Object(g.jsx)("input",{type:"password",min:"6",placeholder:"password",ref:d}),Object(g.jsx)("button",{className:"loginBtn",type:"submit",children:"Login"}),o&&Object(g.jsx)("span",{className:"failure",children:"Something went wrong!"})]}),Object(g.jsx)(x.a,{className:"loginCancel",onClick:function(){return t(!1)}})]})}var k=function(){var e=window.localStorage,t=Object(c.useState)(e.getItem("user")),n=Object(b.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)([]),i=Object(b.a)(r,2),h=i[0],x=i[1],k=Object(c.useState)(null),S=Object(b.a)(k,2),N=S[0],C=S[1],y=Object(c.useState)(null),R=Object(b.a)(y,2),I=R[0],A=R[1],L=Object(c.useState)(null),B=Object(b.a)(L,2),M=B[0],z=B[1],D=Object(c.useState)(null),T=Object(b.a)(D,2),W=T[0],Y=T[1],E=Object(c.useState)(0),F=Object(b.a)(E,2),G=F[0],J=(F[1],Object(c.useState)(!1)),P=Object(b.a)(J,2),U=P[0],V=P[1],_=Object(c.useState)(!1),H=Object(b.a)(_,2),Q=H[0],q=H[1],K=Object(c.useState)({width:"100vw",height:"100vh",latitude:20.5937,longitude:78.9629,zoom:4}),X=Object(b.a)(K,2),Z=X[0],$=X[1];Object(c.useEffect)((function(){(function(){var e=Object(j.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get("https://foodiemebackend.herokuapp.com/api/pins");case 3:t=e.sent,console.log(t.data),x(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var ee=function(){var e=Object(j.a)(u.a.mark((function e(t){var n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={username:a,title:M,desc:W,rating:G,lat:I.lat,long:I.long},e.prev=2,e.next=5,m.a.post("https://foodiemebackend.herokuapp.com/api/pins",n);case 5:c=e.sent,console.log(c),x([].concat(Object(o.a)(h),[c.data])),A(null),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsx)("div",{className:"App",children:Object(g.jsxs)(d.c,Object(l.a)(Object(l.a)({},Z),{},{mapboxApiAccessToken:"pk.eyJ1IjoicGFsYWtrb3R3YW5pMjg4MyIsImEiOiJjazk5aGM4YWgwNGV3M25tcGdrMW1hOHp3In0.vc9TUAitC7_WjRVdli5QdA",onViewportChange:function(e){return $(e)},onDblClick:function(e){var t=Object(b.a)(e.lngLat,2),n=t[0],c=t[1];A({lat:c,long:n})},transitionDuration:"200",children:[h.map((function(e){return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(d.a,{latitude:e.lat,longitude:e.long,offsetLeft:-3.5*Z.zoom,offsetTop:8*Z.zoom,children:Object(g.jsx)(O.a,{style:{fontSize:8*Z.zoom,color:e.username===a?"tomato":"blue",cursor:"pointer"},onClick:function(){return t=e._id,n=e.lat,c=e.long,C(t),void $(Object(l.a)(Object(l.a)({},Z),{},{lat:n,long:c}));var t,n,c}})}),e._id==N&&Object(g.jsx)(d.b,{latitude:e.lat,longitude:e.long,closeButton:!0,closeOnClick:!1,anchor:"left",onClose:function(){return C(null)},children:Object(g.jsxs)("div",{className:"card",children:[Object(g.jsx)("label",{children:"Place"}),Object(g.jsx)("h4",{className:"place",children:e.title}),Object(g.jsx)("label",{children:"Review"}),Object(g.jsx)("p",{children:e.desc}),Object(g.jsx)("label",{children:"Rating"}),Object(g.jsx)("div",{className:"stars",children:Array(e.rating).fill(Object(g.jsx)(p.a,{className:"star"}))}),Object(g.jsx)("label",{children:"Information"}),Object(g.jsxs)("span",{className:"username",children:["Created By ",Object(g.jsx)("b",{children:e.username})]}),Object(g.jsx)("span",{className:"date",children:Object(f.format)(e.createdAt)})]})})]})})),I&&Object(g.jsx)(d.b,{latitude:I.lat,longitude:I.long,closeButton:!0,closeOnClick:!1,anchor:"left",onClose:function(){return A(null)},children:Object(g.jsx)("div",{children:Object(g.jsxs)("form",{onSubmit:ee,children:[Object(g.jsx)("label",{children:"Title"}),Object(g.jsx)("input",{placeholder:"Enter the Title",onChange:function(e){return z(e.target.value)}}),Object(g.jsx)("label",{children:"Review"}),Object(g.jsx)("textarea",{placeholder:"How is this place",onChange:function(e){return Y(e.target.value)}}),Object(g.jsx)("label",{children:"Rating"}),Object(g.jsxs)("select",{children:[Object(g.jsx)("option",{value:"1",children:"1"}),Object(g.jsx)("option",{value:"2",children:"2"}),Object(g.jsx)("option",{value:"3",children:"3"}),Object(g.jsx)("option",{value:"4",children:"4"}),Object(g.jsx)("option",{value:"5",children:"5"})]}),Object(g.jsx)("button",{className:"submitButton",type:"submit",children:"Add Pin"})]})})}),a?Object(g.jsx)("button",{className:"button logout",onClick:function(){s(null),e.removeItem("user")},children:"Log out"}):Object(g.jsxs)("div",{className:"buttons",children:[Object(g.jsx)("button",{className:"button login",onClick:function(){return q(!0)},children:"Log in"}),Object(g.jsx)("button",{className:"button register",onClick:function(){return V(!0)},children:"Register"})]}),U&&Object(g.jsx)(v,{setShowRegister:V}),Q&&Object(g.jsx)(w,{setShowLogin:q,setCurrentUsername:s,myStorage:e})]}))})};r.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(k,{})}),document.getElementById("root"))},70:function(e,t,n){},72:function(e,t,n){}},[[119,1,2]]]);
//# sourceMappingURL=main.54bb5b2f.chunk.js.map